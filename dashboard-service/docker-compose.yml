version: '3.8'

services:
  dashboard-service:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: dashboard-service
    restart: unless-stopped
    ports:
      - "8086:8086"
    environment:
      # Server
      NODE_ENV: production
      PORT: 8086

      # JWT
      JWT_SECRET: ${JWT_SECRET:-your_secure_jwt_secret_here}

      # Circuit Breaker
      CIRCUIT_BREAKER_TIMEOUT: ${CIRCUIT_BREAKER_TIMEOUT:-5000}
      CIRCUIT_BREAKER_ERROR_THRESHOLD: ${CIRCUIT_BREAKER_ERROR_THRESHOLD:-50}
      CIRCUIT_BREAKER_RESET_TIMEOUT: ${CIRCUIT_BREAKER_RESET_TIMEOUT:-30000}

      # Cache
      CACHE_ENABLED: ${CACHE_ENABLED:-true}
      CACHE_TTL_STATS: ${CACHE_TTL_STATS:-300000}
      CACHE_TTL_ANALYTICS: ${CACHE_TTL_ANALYTICS:-600000}

      # Logging
      LOG_LEVEL: ${LOG_LEVEL:-info}
      LOG_MAX_SIZE: ${LOG_MAX_SIZE:-20m}
      LOG_MAX_FILES: ${LOG_MAX_FILES:-14d}

      # CORS
      CORS_ORIGIN: ${CORS_ORIGIN:-http://localhost:5173}

    volumes:
      - ./logs:/app/logs
